<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #box {
            width: 100px;
            height: 100px;
            border: 1px solid black;
            background-color: red;
            position: relative;
            left: 0px;
        }
    </style>
    <script>
        // 자바 스크립트는 인터프린터 방식이기 때문에 실행보다 나중에 오는 요소는
        // 실행보다 나중에 오는 요소는 사용이 불가능하다.
        // 페이지를 모두 로드한 뒤에 실행하도록 한다.

        // window.addEventListener('load', function () {
        //     var box = document.querySelector("#box");
        //     console.log(box);
        // },true);
        //  이 방식이나,

        var moveBox = function (callback) {
            var box = document.querySelector("#box");
            box.callback = callback;
            var x = 0;
            var speed = 5;
            var intervalRef = setInterval(function () {
                x += speed;
                box.style.left = x + "px";
                if (x >= 400) {
                    clearInterval(intervalRef);
                    box.callback(x);
                }
            }, 1000 / 60);
            console.log(box);
        }
        window.onload = function(){
            moveBox(function(x){
                // 그냥 this는 Window 객체가 된다.
                this.style.background = "Yellow"
                this.innerText = x + 'px';
            });
        }
        // 위는 예전방식

        // 자바스크립트의 엔트리 포인트 역할을 한다.  
        // function main() {
        // }
        /// --- user가 사용하는 부분과 라이브러리는 파일이 분리되어있다.

        // window.addEventListener('load', main, true);

    </script>
</head>

<body>
    <div id="box">Box</div>


</body>

</html>